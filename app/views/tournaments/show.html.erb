<h1><%= @tournament.name %></h1>

<table class="table">
  <thead>
    <tr>
      <th>Player</th>
      <th>Rank</th>
      <th>ELO Rating</th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <% @ranks.each do |rank| %>
      <tr>
        <td><%= gravatar_image_tag rank.user.email %> <%= rank.user.name %></td>
        <td><%= render_rank rank %></td>
        <td><%= rank.user.elo_ratings.where(:tournament_id => @tournament).first.rating %></td>
        <td>
          <% if rank.user != current_user && @tournament.has_user?(current_user) %>
            <%= link_to 'Game', new_tournament_game_path(@tournament, :rank_id => rank), :class => 'btn' %>
          <% end %>
        </td>
      </tr>
    <% end %>
    <% if @tournament.ranks.empty? %>
      <tr colspan="3">
        <td>There are no ranking players.</td>
      </tr>
    <% end %>
  </tbody>
</table>
